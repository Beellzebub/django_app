FROM node:18.1-alpine AS builder

RUN mkdir -p /opt/frontend
WORKDIR /opt/frontend/

COPY ./code/frontend .

RUN npm install --force

ENV PATH="./node_modules/.bin:$PATH"

RUN npm run build

FROM node:18.1-alpine

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app/

COPY --from=builder /opt/frontend/build ./build